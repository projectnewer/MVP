<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newer | The Reverse Real Estate Marketplace</title>
    
    <!-- Brand Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' fill='none'><path d='M20 80 V35 L50 20 L50 55 L20 80 Z' fill='%2300C2B2' stroke='%2300C2B2' stroke-width='4' stroke-linejoin='round' /><path d='M80 20 V65 L50 80 L50 45 L80 20 Z' fill='%2300C2B2' stroke='%2300C2B2' stroke-width='4' stroke-linejoin='round' /></svg>">
    
    <!-- SEO Meta -->
    <meta name="description" content="Newer is the Reverse Real Estate Marketplace. Buyers: Skip the search and make builders bid. Builders: Eliminate spec risk and build pre-sold with verified demand.">
    <meta name="keywords" content="PropTech, New Construction, Home Builder, Off-Market Real Estate, Reverse Marketplace, Fintech Mortgage, Build Pre-Sold">
    
    <!-- Font: Outfit (Brand) + JetBrains Mono (Data) -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Icons: Lucide -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- CSS (Tailwind JIT) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class', 
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        brand: {
                            teal: '#00C2B2',
                            charcoal: '#0F172A', // Dark Slate
                            concrete: '#F3F4F6',
                            gold: '#FBBF24',
                            border: '#E5E7EB',
                            muted: '#9CA3AF',
                            success: '#10B981',
                            danger: '#EF4444'
                        }
                    },
                    boxShadow: {
                        'soft': '0 10px 40px -10px rgba(0,0,0,0.08)',
                        'glow': '0 0 20px rgba(0, 194, 178, 0.4)',
                        'glow-gold': '0 0 30px rgba(251, 191, 36, 0.3)',
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'marquee': 'marquee 40s linear infinite',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'stamp': 'stamp-in 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) both',
                        'fade-in': 'fade-in 0.5s ease-out forwards',
                        'typing': 'typing 1s infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        marquee: {
                            '0%': { transform: 'translateX(0)' },
                            '100%': { transform: 'translateX(-50%)' }, 
                        },
                        'stamp-in': {
                            '0%': { opacity: '0', transform: 'scale(3) rotate(-10deg)' },
                            '100%': { opacity: '1', transform: 'scale(1) rotate(-10deg)' },
                        },
                        'fade-in': {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        'typing': {
                            '0%, 100%': { opacity: '0.3' },
                            '50%': { opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        body { font-family: 'Outfit', sans-serif; }

        /* Nhouse Pattern */
        .bg-house-pattern {
            background-image: 
                linear-gradient(45deg, rgba(0,0,0,0.03) 25%, transparent 25%), 
                linear-gradient(-45deg, rgba(0,0,0,0.03) 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, rgba(0,0,0,0.03) 75%), 
                linear-gradient(-45deg, transparent 75%, rgba(0,0,0,0.03) 75%);
            background-size: 20px 20px;
        }
        .dark .bg-house-pattern {
             background-image: 
                linear-gradient(45deg, rgba(255,255,255,0.03) 25%, transparent 25%), 
                linear-gradient(-45deg, rgba(255,255,255,0.03) 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, rgba(255,255,255,0.03) 75%), 
                linear-gradient(-45deg, transparent 75%, rgba(255,255,255,0.03) 75%);
        }

        /* Smooth Reveal Animation Class */
        .reveal-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Ambient Glow Background */
        .ambient-glow {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80vw;
            height: 80vw;
            background: radial-gradient(circle, rgba(0,194,178,0.08) 0%, rgba(255,255,255,0) 70%);
            z-index: -1;
            pointer-events: none;
            transition: background 1s ease;
        }
        .dark .ambient-glow {
            background: radial-gradient(circle, rgba(251,191,36,0.06) 0%, rgba(15,23,42,0) 70%);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #F3F4F6; }
        ::-webkit-scrollbar-thumb { background: #D1D5DB; border-radius: 4px; }
        .dark ::-webkit-scrollbar-track { background: #0F172A; }
        .dark ::-webkit-scrollbar-thumb { background: #334155; }

        /* Floating UI Bubbles */
        .floating-bubble {
            animation: float-bubble 4s ease-in-out infinite;
            backdrop-filter: blur(8px);
        }
        @keyframes float-bubble {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        /* Toggle Slider Logic */
        .toggle-track { position: relative; }
        .toggle-pill {
            position: absolute;
            top: 0.25rem;
            bottom: 0.25rem;
            left: 0.25rem;
            width: calc(50% - 0.25rem);
            border-radius: 9999px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 0;
        }

        /* Input Range Styling */
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%;
            background: #00C2B2; cursor: pointer; margin-top: -8px; 
            border: 3px solid #FFFFFF; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; background: #E5E7EB; border-radius: 2px; }

        .theme-transition { transition: all 0.5s ease; }

        /* Stamp Effect */
        .stamp-container {
            border: 4px solid #10B981;
            padding: 10px 20px;
            text-transform: uppercase;
            font-weight: 800;
            font-size: 2rem;
            color: #10B981;
            transform: rotate(-10deg);
            display: inline-block;
        }
        
        /* Receipt Styles */
        .receipt-edge {
            background-image: radial-gradient(circle at 10px 0, transparent 6px, white 7px);
            background-size: 20px 10px;
            background-repeat: repeat-x;
            height: 10px;
            width: 100%;
            transform: rotate(180deg);
        }
        .dark .receipt-edge {
            background-image: radial-gradient(circle at 10px 0, transparent 6px, #1F2937 7px);
        }

        /* AI Typing Dot */
        .dot-typing {
            width: 6px; height: 6px; border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out both;
        }
        .dot-typing:nth-child(1) { animation-delay: -0.32s; }
        .dot-typing:nth-child(2) { animation-delay: -0.16s; }
    </style>
</head>
<body class="bg-brand-concrete text-brand-charcoal dark:bg-brand-charcoal dark:text-gray-100 font-sans antialiased pb-32 lg:pb-0 transition-colors duration-500 relative">

    <!-- Ambient Background -->
    <div class="ambient-glow"></div>

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-white/90 dark:bg-brand-charcoal/90 border-b border-brand-border dark:border-gray-800 backdrop-blur-md transition-colors duration-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <!-- LOGO -->
                <a href="#" class="flex items-baseline logo-gap group" onclick="setAudience('buyer'); window.scrollTo({top: 0, behavior: 'smooth'});">
                    <span class="text-2xl font-extrabold tracking-tight leading-none text-brand-charcoal dark:text-white transition-colors">Newer<span id="nav-logo-dot" class="text-brand-teal transition-colors">.</span></span>
                </a>
                
                <!-- Desktop Animated Toggle -->
                <div class="hidden md:flex bg-gray-100 dark:bg-gray-800 rounded-full p-1 relative toggle-track w-[280px]">
                    <!-- The Sliding Pill -->
                    <div id="nav-toggle-pill" class="toggle-pill bg-white dark:bg-brand-charcoal shadow-sm border border-gray-200 dark:border-gray-600"></div>
                    
                    <button onclick="setAudience('buyer')" class="relative z-10 w-1/2 py-2 rounded-full text-sm font-bold transition-colors text-center" id="nav-btn-buyer">For Buyers</button>
                    <button onclick="setAudience('builder')" class="relative z-10 w-1/2 py-2 rounded-full text-sm font-bold transition-colors text-center text-gray-500" id="nav-btn-builder">For Builders</button>
                </div>

                <button id="nav-cta-btn" onclick="openWaitlistModal()" class="hidden md:block bg-brand-charcoal text-white px-6 py-2.5 rounded-full text-sm font-bold hover:bg-brand-teal dark:bg-brand-gold dark:text-brand-charcoal dark:hover:bg-white transition-all shadow-lg hover:shadow-glow transform hover:-translate-y-0.5">
                    Create Free Profile
                </button>
            </div>
        </div>
    </nav>

    <!-- Ticker -->
    <div class="w-full bg-brand-charcoal dark:bg-black text-gray-400 overflow-hidden z-40 relative h-10 flex items-center border-b border-brand-charcoal dark:border-gray-800 transition-colors">
        <div class="flex whitespace-nowrap overflow-hidden absolute w-full">
            <div class="animate-marquee inline-block text-xs font-bold tracking-wide">
                <span class="mx-8"><span class="text-brand-teal dark:text-brand-gold">●</span> <strong class="text-white">New Permit</strong> issued in 78704</span>
                <span class="mx-8"><span class="text-brand-teal dark:text-brand-gold">●</span> <strong class="text-white">3 Builders</strong> bidding on Lot 4</span>
                <span class="mx-8"><span class="text-brand-teal dark:text-brand-gold">●</span> <strong class="text-white">Rate Buy-down</strong> secured by Buyer #221</span>
                <span class="mx-8"><span class="text-brand-teal dark:text-brand-gold">●</span> <strong class="text-white">$15k Incentive</strong> accepted by Buyer #8492</span>
                <!-- Duplicates for seamless loop -->
                <span class="mx-8"><span class="text-brand-teal dark:text-brand-gold">●</span> <strong class="text-white">New Permit</strong> issued in 78704</span>
                <span class="mx-8"><span class="text-brand-teal dark:text-brand-gold">●</span> <strong class="text-white">3 Builders</strong> bidding on Lot 4</span>
                <span class="mx-8"><span class="text-brand-teal dark:text-brand-gold">●</span> <strong class="text-white">Rate Buy-down</strong> secured by Buyer #221</span>
                <span class="mx-8"><span class="text-brand-teal dark:text-brand-gold">●</span> <strong class="text-white">$15k Incentive</strong> accepted by Buyer #8492</span>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="relative pt-12 pb-20 md:pt-24 md:pb-32 overflow-hidden bg-transparent theme-transition scroll-mt-28" id="hero">
        <!-- Decoration -->
        <div class="absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-brand-concrete to-transparent dark:from-gray-900/50 hidden lg:block -z-10"></div>
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 w-full grid lg:grid-cols-2 gap-12 items-center">
            <div class="max-w-2xl reveal-on-scroll">
                <div id="hero-badge" class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-brand-teal/10 dark:bg-brand-gold/10 text-brand-teal dark:text-brand-gold text-xs font-bold uppercase tracking-widest mb-8 theme-transition border border-brand-teal/20 dark:border-brand-gold/20">
                    <span class="w-2 h-2 rounded-full bg-brand-teal dark:bg-brand-gold animate-pulse theme-transition" id="hero-badge-dot"></span> <span id="hero-badge-text">The Reverse Market</span>
                </div>
                <h1 id="hero-title" class="text-5xl md:text-7xl font-extrabold text-brand-charcoal dark:text-white tracking-tight mb-6 leading-[1.1] transition-colors">
                    Skip the Search.<br>
                    <span class="text-brand-teal theme-transition" id="hero-highlight">Make Builders Bid.</span>
                </h1>
                <p id="hero-desc" class="mt-6 text-lg md:text-xl text-gray-500 dark:text-gray-300 font-medium leading-relaxed transition-colors">
                    The first marketplace where you define the terms, and top builders compete to build your home.
                </p>
                <div class="mt-10 flex flex-col sm:flex-row gap-4">
                    <a href="#demo" id="hero-cta-main" class="px-8 py-4 bg-brand-teal text-white rounded-full font-bold shadow-lg hover:shadow-glow hover:-translate-y-1 transition-all text-center theme-transition">Create Free Profile</a>
                    <a href="#concept" class="px-8 py-4 bg-white dark:bg-transparent text-brand-charcoal dark:text-white border-2 border-brand-charcoal dark:border-white rounded-full font-bold hover:bg-brand-charcoal hover:text-white dark:hover:bg-white dark:hover:text-brand-charcoal transition-all text-center">How It Works</a>
                </div>
            </div>
            
            <!-- Hero Graphic with Floating UI -->
            <div class="relative lg:h-[600px] w-full hidden md:block reveal-on-scroll" style="transition-delay: 200ms;">
                <div class="absolute inset-0 bg-house-pattern rounded-3xl transform rotate-3 border border-brand-border dark:border-gray-700 transition-colors opacity-50"></div>
                <div class="absolute inset-4 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden border border-brand-border dark:border-gray-700 transform -rotate-2 hover:rotate-0 transition-all duration-700 ease-out group relative">
                    <img id="hero-image-el" src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=1200&q=80" 
                         alt="Newer app interface" 
                         class="absolute inset-0 w-full h-full object-cover transition-opacity duration-500 group-hover:scale-105">
                    
                    <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"></div>

                    <!-- Floating Notification Cards (Dynamic) -->
                    <div id="hero-floating-notifications" class="absolute inset-0 pointer-events-none p-8 flex flex-col justify-end items-end gap-4">
                        <!-- JS injects bubbles here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Trusted By -->
    <section class="py-12 bg-white/50 dark:bg-brand-charcoal/50 border-y border-brand-border dark:border-gray-800 transition-colors scroll-mt-28 reveal-on-scroll">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-xs uppercase tracking-widest text-brand-muted font-bold mb-8">Designed for Top Builders</p>
            <div class="flex flex-wrap justify-center items-center gap-12 md:gap-20 opacity-40 grayscale hover:grayscale-0 transition-all duration-500">
                <div class="font-extrabold text-2xl text-brand-charcoal dark:text-gray-400">LENNAR</div>
                <div class="font-extrabold text-2xl text-brand-charcoal dark:text-gray-400">TOLL BROTHERS</div>
                <div class="font-extrabold text-2xl text-brand-charcoal dark:text-gray-400">PULTE</div>
                <div class="font-extrabold text-2xl text-brand-charcoal dark:text-gray-400 flex items-center gap-2"><i data-lucide="landmark" class="w-6 h-6"></i> PLAID</div>
            </div>
        </div>
    </section>

    <!-- Concept Section (The Why - Now First) -->
    <section id="concept" class="py-24 bg-brand-concrete/30 dark:bg-gray-900/50 transition-colors scroll-mt-28">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16 reveal-on-scroll">
                <h2 id="concept-title" class="text-3xl md:text-4xl font-extrabold text-brand-charcoal dark:text-white transition-colors">The Power Shift</h2>
                <p id="concept-desc" class="mt-4 text-gray-500 dark:text-gray-300 max-w-2xl mx-auto text-lg transition-colors">
                    We flipped the model. <span class="text-brand-teal font-bold" id="concept-highlight">Become the Client.</span>
                </p>
            </div>
            <div class="grid md:grid-cols-2 gap-8 items-stretch">
                <!-- Old Way -->
                <div class="p-10 rounded-3xl bg-white dark:bg-gray-800 border border-brand-border dark:border-gray-700 relative h-full flex flex-col hover:shadow-lg transition-all reveal-on-scroll" style="transition-delay: 100ms;">
                    <span class="absolute top-8 right-8 text-xs font-bold text-gray-300 dark:text-gray-500 uppercase tracking-widest" id="concept-label-old">The Old Way</span>
                    <h3 id="concept-header-old" class="text-2xl font-bold text-brand-charcoal dark:text-white mb-6 flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 dark:text-gray-300"><i data-lucide="search" class="w-5 h-5"></i></div>
                        Active Shopper
                    </h3>
                    <ul id="concept-old-list" class="space-y-6 text-gray-500 dark:text-gray-400 font-medium flex-grow">
                         <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400"></i> Refreshing apps every 15 mins.</li>
                         <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400"></i> Driving to sold open houses.</li>
                         <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400"></i> Bidding wars.</li>
                    </ul>
                </div>
                <!-- New Way -->
                <div class="p-10 rounded-3xl bg-brand-charcoal dark:bg-black text-white relative h-full flex flex-col shadow-2xl transform md:-translate-y-4 border border-transparent dark:border-gray-800 reveal-on-scroll" style="transition-delay: 200ms;">
                    <span class="absolute top-8 right-8 text-xs font-bold text-brand-teal uppercase tracking-widest theme-transition" id="concept-badge-new">Newer Model</span>
                    <h3 id="concept-header-new" class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-brand-teal flex items-center justify-center text-white theme-transition" id="concept-icon-new"><i data-lucide="crown" class="w-5 h-5"></i></div>
                        VIP Client
                    </h3>
                    <ul id="concept-new-list" class="space-y-6 text-gray-300 font-medium flex-grow">
                        <!-- JS Filled -->
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- 1-2-3 How it Works (The How - Now Second) -->
    <section id="how-it-works" class="py-24 bg-white dark:bg-brand-charcoal/20 transition-colors relative overflow-hidden">
        <!-- Subtle Grid Background -->
        <div class="absolute inset-0 opacity-30 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px] dark:bg-[radial-gradient(#1f2937_1px,transparent_1px)] pointer-events-none"></div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="text-center mb-20 reveal-on-scroll">
                <span id="process-kicker" class="text-xs font-bold uppercase tracking-widest text-gray-400 dark:text-gray-500">The Process</span>
                <h2 id="process-title" class="text-3xl font-extrabold text-brand-charcoal dark:text-white mt-3">Demand. Verify. Receive.</h2>
            </div>

            <div class="relative grid md:grid-cols-3 gap-8 reveal-on-scroll">
                <!-- Connector Line (Desktop Only) -->
                <div class="hidden md:block absolute top-12 left-[16%] right-[16%] h-0.5 bg-gray-100 dark:bg-gray-700 -z-10"></div>

                <!-- STEP 1 -->
                <div class="group relative bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-brand-border dark:border-gray-700 hover:-translate-y-1">
                    <div id="step-1-badge" class="absolute -top-6 left-1/2 transform -translate-x-1/2 w-12 h-12 rounded-full bg-brand-teal text-white flex items-center justify-center font-bold text-lg shadow-lg ring-4 ring-white dark:ring-gray-900 transition-colors">1</div>
                    <div class="mt-6 text-center">
                        <div class="mb-5 inline-flex p-4 rounded-2xl bg-brand-concrete dark:bg-gray-700 text-brand-teal dark:text-brand-gold transition-colors">
                            <i id="step-1-icon" data-lucide="sliders-horizontal" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-xl font-bold text-brand-charcoal dark:text-white mb-3" id="step-1-title">Define</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed" id="step-1-desc">Set your style, budget, and must-haves.</p>
                    </div>
                </div>

                <!-- STEP 2 -->
                <div class="group relative bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-brand-border dark:border-gray-700 hover:-translate-y-1" style="transition-delay: 100ms;">
                    <div id="step-2-badge" class="absolute -top-6 left-1/2 transform -translate-x-1/2 w-12 h-12 rounded-full bg-brand-teal text-white flex items-center justify-center font-bold text-lg shadow-lg ring-4 ring-white dark:ring-gray-900 transition-colors">2</div>
                    <div class="mt-6 text-center">
                        <div class="mb-5 inline-flex p-4 rounded-2xl bg-brand-concrete dark:bg-gray-700 text-brand-teal dark:text-brand-gold transition-colors">
                            <i id="step-2-icon" data-lucide="shield-check" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-xl font-bold text-brand-charcoal dark:text-white mb-3" id="step-2-title">Verify</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed" id="step-2-desc">Prove you are real to unlock VIP status.</p>
                    </div>
                </div>

                <!-- STEP 3 -->
                <div class="group relative bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-brand-border dark:border-gray-700 hover:-translate-y-1" style="transition-delay: 200ms;">
                    <div id="step-3-badge" class="absolute -top-6 left-1/2 transform -translate-x-1/2 w-12 h-12 rounded-full bg-brand-teal text-white flex items-center justify-center font-bold text-lg shadow-lg ring-4 ring-white dark:ring-gray-900 transition-colors">3</div>
                    <div class="mt-6 text-center">
                        <div class="mb-5 inline-flex p-4 rounded-2xl bg-brand-concrete dark:bg-gray-700 text-brand-teal dark:text-brand-gold transition-colors">
                            <i id="step-3-icon" data-lucide="gift" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-xl font-bold text-brand-charcoal dark:text-white mb-3" id="step-3-title">Receive</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed" id="step-3-desc">Builders compete for your business.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Demo Section -->
    <section id="demo" class="py-24 bg-brand-concrete/30 dark:bg-brand-charcoal/50 relative overflow-hidden transition-colors scroll-mt-28" aria-labelledby="demo-title">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="mb-16 text-center reveal-on-scroll">
                <h2 id="demo-title" class="text-3xl md:text-4xl font-extrabold text-brand-charcoal dark:text-white transition-colors">Your Personal Market</h2>
                <p id="demo-desc" class="mt-4 text-gray-500 dark:text-gray-300 max-w-2xl mx-auto text-lg transition-colors">Broadcast your needs via the App. Watch the market respond.</p>
            </div>

            <div class="grid lg:grid-cols-12 gap-12 reveal-on-scroll">
                <!-- LEFT: Buyer App -->
                <div class="lg:col-span-4 flex flex-col items-center">
                    <div id="phone-container" class="w-full max-w-[350px] bg-white md:rounded-[3rem] md:border-8 md:border-brand-charcoal border-0 shadow-2xl overflow-hidden h-[700px] relative">
                        <div class="hidden md:block absolute top-0 left-1/2 transform -translate-x-1/2 w-32 h-6 bg-brand-charcoal rounded-b-2xl z-20"></div>
                        <!-- App Header -->
                        <div class="h-20 bg-white border-b border-brand-border flex items-end justify-between px-6 pb-3 pt-8">
                            <span class="text-xl font-extrabold tracking-tight leading-none text-brand-charcoal">Newer<span class="text-brand-teal">.</span></span>
                            <div class="w-8 h-8 rounded-full bg-brand-concrete flex items-center justify-center"><i data-lucide="user" class="w-4 h-4 text-brand-charcoal"></i></div>
                        </div>
                        <!-- App Body -->
                        <div id="buyer-screen-container" class="h-[calc(100%-80px-60px)] overflow-y-auto bg-brand-concrete p-5 relative scrollbar-hide text-brand-charcoal">
                            <!-- STEP 1: Style -->
                            <div id="step-1" class="step-content fade-in">
                                <h3 class="text-xl font-bold text-brand-charcoal mb-1">Set the mood.</h3>
                                <p class="text-xs text-gray-400 mb-6 font-bold uppercase tracking-wide">Which style feels like home?</p>
                                <div class="grid grid-cols-2 gap-3">
                                    <button onclick="selectStyle('Modern')" class="style-btn group p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition-all text-center border border-transparent hover:border-brand-teal">
                                        <div class="h-12 w-12 mx-auto bg-brand-concrete rounded-full mb-3 flex items-center justify-center group-hover:bg-brand-teal group-hover:text-white transition-colors"><i data-lucide="box" class="w-5 h-5"></i></div>
                                        <span class="text-xs font-bold text-brand-charcoal">Modern</span>
                                    </button>
                                    <button onclick="selectStyle('Traditional')" class="style-btn group p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition-all text-center border border-transparent hover:border-brand-teal">
                                        <div class="h-12 w-12 mx-auto bg-brand-concrete rounded-full mb-3 flex items-center justify-center group-hover:bg-brand-teal group-hover:text-white transition-colors"><i data-lucide="home" class="w-5 h-5"></i></div>
                                        <span class="text-xs font-bold text-brand-charcoal">Traditional</span>
                                    </button>
                                    <button onclick="selectStyle('Farmhouse')" class="style-btn group p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition-all text-center border border-transparent hover:border-brand-teal">
                                        <div class="h-12 w-12 mx-auto bg-brand-concrete rounded-full mb-3 flex items-center justify-center group-hover:bg-brand-teal group-hover:text-white transition-colors"><i data-lucide="warehouse" class="w-5 h-5"></i></div>
                                        <span class="text-xs font-bold text-brand-charcoal">Farmhouse</span>
                                    </button>
                                    <button onclick="selectStyle('Coastal')" class="style-btn group p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition-all text-center border border-transparent hover:border-brand-teal">
                                        <div class="h-12 w-12 mx-auto bg-brand-concrete rounded-full mb-3 flex items-center justify-center group-hover:bg-brand-teal group-hover:text-white transition-colors"><i data-lucide="sun" class="w-5 h-5"></i></div>
                                        <span class="text-xs font-bold text-brand-charcoal">Coastal</span>
                                    </button>
                                </div>
                            </div>
                            <!-- STEP 2: Basics + Persona -->
                            <div id="step-2" class="step-content hidden fade-in">
                                <h3 class="text-xl font-bold text-brand-charcoal mb-1">The Basics.</h3>
                                <p class="text-xs text-gray-400 mb-6 font-bold uppercase tracking-wide">Define your space needs.</p>
                                <div class="space-y-6 bg-white p-6 rounded-3xl shadow-sm">
                                    <div>
                                        <label class="text-xs font-bold text-gray-400 uppercase">Persona</label>
                                        <div class="flex gap-2 mt-2">
                                            <button onclick="setPersona('Family')" class="persona-btn flex-1 py-3 bg-brand-concrete rounded-xl text-xs font-bold hover:bg-brand-teal hover:text-white transition-colors text-brand-charcoal">Growing Family</button>
                                            <button onclick="setPersona('Couple')" class="persona-btn flex-1 py-3 bg-brand-concrete rounded-xl text-xs font-bold hover:bg-brand-teal hover:text-white transition-colors text-brand-charcoal">Pro Couple</button>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-2"><label class="text-xs font-bold text-brand-charcoal">Bedrooms</label><span id="bed-val" class="text-xs font-bold text-brand-teal">3</span></div>
                                        <input type="range" min="2" max="6" value="3" oninput="updateRange('bed', this.value)">
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-2"><label class="text-xs font-bold text-brand-charcoal">Max Budget</label><span id="budget-val" class="text-xs font-bold text-brand-teal">$500k</span></div>
                                        <input type="range" min="300" max="1500" step="50" value="500" oninput="updateRange('budget', this.value)">
                                    </div>
                                    <button onclick="nextStep('amenities')" class="w-full py-4 bg-brand-charcoal text-white rounded-xl font-bold text-sm shadow-lg">Next Step</button>
                                </div>
                            </div>
                             <!-- STEP Amenities -->
                             <div id="step-amenities" class="step-content hidden fade-in">
                                <h3 class="text-xl font-bold text-brand-charcoal mb-1">Must Haves.</h3>
                                <p class="text-xs text-gray-400 mb-6 font-bold uppercase tracking-wide">Select top 3.</p>
                                <div class="flex flex-col gap-3 mb-6">
                                    <button onclick="toggleAmenity(this, 'Office')" class="amenity-btn w-full p-4 bg-white rounded-2xl text-left font-bold text-sm text-brand-charcoal border border-transparent hover:border-brand-teal flex items-center gap-3"><i data-lucide="laptop" class="w-4 h-4 text-brand-teal"></i> Home Office</button>
                                    <button onclick="toggleAmenity(this, '3-Car Garage')" class="amenity-btn w-full p-4 bg-white rounded-2xl text-left font-bold text-sm text-brand-charcoal border border-transparent hover:border-brand-teal flex items-center gap-3"><i data-lucide="car" class="w-4 h-4 text-brand-teal"></i> 3-Car Garage</button>
                                    <button onclick="toggleAmenity(this, 'Pool Ready')" class="amenity-btn w-full p-4 bg-white rounded-2xl text-left font-bold text-sm text-brand-charcoal border border-transparent hover:border-brand-teal flex items-center gap-3"><i data-lucide="waves" class="w-4 h-4 text-brand-teal"></i> Pool Ready</button>
                                </div>
                                <button onclick="nextStep('3')" class="w-full py-4 bg-brand-charcoal text-white rounded-xl font-bold text-sm shadow-lg">Get VIP Status</button>
                            </div>
                            <!-- STEP 3: Verify -->
                            <div id="step-3" class="step-content hidden fade-in">
                                <h3 class="text-xl font-bold text-brand-charcoal mb-1">Get Taken Seriously.</h3>
                                <p class="text-xs text-gray-400 mb-6 font-bold uppercase tracking-wide">Verification stops you from being ignored.</p>
                                <div class="bg-brand-teal/10 p-4 rounded-2xl mb-6 flex items-center gap-3 border border-brand-teal/20">
                                    <div class="w-8 h-8 rounded-full bg-brand-teal flex items-center justify-center text-white"><i data-lucide="shield-check" class="w-4 h-4"></i></div>
                                    <span class="text-xs font-bold text-brand-teal">Verified Proof of Funds</span>
                                </div>
                                <button onclick="verifyUser(event)" class="w-full py-4 bg-white border-2 border-brand-border text-brand-charcoal rounded-xl font-bold text-sm mb-3 hover:border-brand-teal transition-colors">Upload Pre-Approval</button>
                                <button onclick="verifyUser(event)" class="w-full py-4 bg-white border-2 border-brand-border text-brand-charcoal rounded-xl font-bold text-sm hover:border-brand-teal transition-colors">Connect Bank via Plaid</button>
                                
                                <div class="mt-4 flex items-center justify-center gap-2 text-[10px] text-gray-400">
                                    <i data-lucide="lock" class="w-3 h-3"></i>
                                    <span>Bank-level 256-bit encryption. We never see your login.</span>
                                </div>
                            </div>
                            
                            <!-- STEP 4: Success/Dashboard -->
                            <div id="step-4" class="step-content hidden fade-in text-center pt-8">
                                <div class="w-16 h-16 bg-brand-charcoal rounded-full flex items-center justify-center mx-auto mb-4 shadow-xl border-4 border-brand-teal animate-bounce">
                                    <i data-lucide="crown" class="w-8 h-8 text-brand-teal"></i>
                                </div>
                                <h3 class="text-xl font-bold text-brand-charcoal mb-1">You are VIP!</h3>
                                <p class="text-xs text-gray-500 mb-6">Alias: <span class="font-mono font-bold bg-white px-2 py-1 rounded border border-gray-200">Buyer #8942</span></p>

                                <!-- AI Bio Section -->
                                <div class="mb-6 px-1">
                                    <div id="ai-bio-container" class="hidden p-3 bg-white border border-brand-teal/20 rounded-xl text-left mb-3 shadow-sm">
                                        <div class="flex items-center gap-2 mb-2">
                                            <span class="text-xs font-bold uppercase text-brand-teal tracking-wider">AI Bio</span>
                                        </div>
                                        <p id="ai-bio-text" class="text-xs text-gray-600 italic leading-relaxed"></p>
                                    </div>
                                    <button onclick="generateBuyerBio()" id="btn-generate-bio" class="w-full py-2.5 bg-white border border-brand-border text-brand-teal font-bold rounded-xl text-xs hover:bg-brand-teal/5 hover:border-brand-teal transition-colors flex items-center justify-center gap-2 shadow-sm">
                                        <span>✨</span> Enhance Profile with AI
                                    </button>
                                </div>

                                <div id="buyer-pitches-container" class="mt-4 text-left">
                                    <div class="p-4 rounded-xl border border-dashed border-gray-300 bg-gray-50 text-center">
                                        <p class="text-[10px] text-gray-400 italic">Waiting for builder proposals...</p>
                                        <div class="mt-2 flex justify-center gap-1">
                                            <div class="w-1.5 h-1.5 bg-gray-300 rounded-full animate-bounce"></div>
                                            <div class="w-1.5 h-1.5 bg-gray-300 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                                            <div class="w-1.5 h-1.5 bg-gray-300 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                                        </div>
                                    </div>
                                </div>
                                <button onclick="resetDemo()" class="mt-6 text-xs text-gray-400 hover:text-brand-teal underline">Reset Demo</button>
                            </div>
                        </div>
                        <!-- App Footer -->
                        <div class="h-16 bg-white border-t border-brand-border flex justify-around items-center px-2">
                            <button class="p-2"><i data-lucide="home" class="w-5 h-5 text-brand-teal"></i></button>
                            <button class="p-2"><i data-lucide="heart" class="w-5 h-5 text-gray-300"></i></button>
                            <button class="p-2"><i data-lucide="message-square" class="w-5 h-5 text-gray-300"></i></button>
                        </div>
                    </div>
                </div>

                <!-- RIGHT: Builder Dashboard -->
                <div class="lg:col-span-8 h-[600px] lg:h-[700px] flex flex-col">
                    <div class="mb-6 pl-4 border-l-4 border-brand-gold">
                        <span class="text-xs font-bold uppercase text-yellow-600 dark:text-brand-gold tracking-widest">Builder View</span>
                        <h3 class="text-xl font-bold text-brand-charcoal dark:text-white">Demand Command Center</h3>
                    </div>
                    <div id="builder-dashboard-container" class="flex-1 bg-brand-charcoal rounded-3xl shadow-2xl overflow-hidden flex flex-col border border-gray-800 relative">
                        <!-- Top Bar -->
                        <div class="h-16 bg-gray-900 border-b border-gray-800 flex items-center justify-between px-6">
                            <div class="flex items-center gap-3">
                                <div class="flex gap-1.5"><div class="w-3 h-3 rounded-full bg-red-500"></div><div class="w-3 h-3 rounded-full bg-yellow-500"></div><div class="w-3 h-3 rounded-full bg-green-500"></div></div>
                                <span class="ml-4 font-mono text-xs text-gray-500">TERMINAL_V2</span>
                                <span class="px-2 py-0.5 bg-brand-teal/20 text-brand-teal text-[10px] font-bold rounded animate-pulse">LIVE</span>
                            </div>
                            <div class="flex bg-gray-800 rounded-lg p-1">
                                <button onclick="toggleDashboardView('list')" id="view-list-btn" class="px-4 py-1.5 rounded-md text-xs font-bold bg-brand-gold text-brand-charcoal transition-all">Feed</button>
                                <button onclick="toggleDashboardView('map')" id="view-map-btn" class="px-4 py-1.5 rounded-md text-xs font-bold text-gray-400 hover:text-white transition-all">Map</button>
                                <button onclick="toggleDashboardView('intel')" id="view-intel-btn" class="px-4 py-1.5 rounded-md text-xs font-bold text-gray-400 hover:text-white transition-all">Intel</button>
                            </div>
                        </div>
                        <!-- Stats Bar with Animated Counters -->
                        <div class="grid grid-cols-4 border-b border-gray-800 bg-gray-900/50">
                            <div class="p-4 border-r border-gray-800"><div class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Active Buyers</div><div class="text-xl font-mono font-bold text-white counter" data-target="1248" id="stat-active">0</div></div>
                            <div class="p-4 border-r border-gray-800"><div class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Avg Budget</div><div class="text-xl font-mono font-bold text-brand-gold">$485k</div></div>
                            <div class="p-4 border-r border-gray-800"><div class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Credits</div><div class="text-xl font-mono font-bold text-white" id="stat-credits">500</div></div>
                            <div class="p-4"><div class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Conversion</div><div class="text-xl font-mono font-bold text-green-400">18.4%</div></div>
                        </div>
                        <!-- Content Area -->
                        <div id="builder-dashboard-body" class="flex-1 relative bg-brand-charcoal overflow-hidden">
                            <!-- List View -->
                            <div id="dashboard-list-view" class="absolute inset-0 overflow-y-auto p-4 space-y-2"></div>
                            
                            <!-- Map View -->
                            <div id="dashboard-map-view" class="absolute inset-0 hidden">
                                <canvas id="demandMap" class="w-full h-full"></canvas>
                                <div class="absolute bottom-4 left-4 bg-gray-900/90 backdrop-blur px-4 py-2 rounded-lg text-xs font-bold text-white border border-gray-700">
                                    <span class="text-brand-teal">●</span> Your Lots &nbsp; <span class="text-brand-gold">●</span> Demand Heat
                                </div>
                            </div>

                             <!-- Intel View -->
                             <div id="dashboard-intel-view" class="absolute inset-0 hidden p-6 overflow-y-auto">
                                <div class="grid grid-cols-2 gap-6 h-full">
                                    <div class="bg-gray-800/50 p-4 rounded-xl border border-gray-700">
                                        <h4 class="text-xs font-bold text-gray-400 uppercase mb-4">Feature Demand</h4>
                                        <div class="space-y-4">
                                            <div><div class="flex justify-between text-xs text-gray-400 mb-1"><span>Home Office</span><span class="text-brand-gold font-mono">42%</span></div><div class="h-1 bg-gray-700 rounded-full"><div class="h-full bg-brand-gold w-[42%] rounded-full"></div></div></div>
                                            <div><div class="flex justify-between text-xs text-gray-400 mb-1"><span>3-Car Garage</span><span class="text-gray-500 font-mono">28%</span></div><div class="h-1 bg-gray-700 rounded-full"><div class="h-full bg-indigo-500 w-[28%] rounded-full"></div></div></div>
                                        </div>
                                    </div>
                                    <div class="bg-gray-800/50 p-4 rounded-xl border border-gray-700">
                                        <h4 class="text-xs font-bold text-gray-400 uppercase mb-4">Budget Trend</h4>
                                        <div class="h-32 w-full"><canvas id="intelChart"></canvas></div>
                                    </div>
                                </div>
                            </div>

                            <!-- CARD OVERLAY -->
                            <div id="user-card-overlay" class="absolute bottom-0 left-0 right-0 bg-gray-900/95 border-t border-brand-gold p-6 transform translate-y-full transition-transform duration-500 backdrop-blur-md z-20">
                                <div class="flex justify-between items-start mb-4">
                                    <div><div class="flex items-center gap-2 mb-1"><span class="w-2 h-2 bg-brand-gold rounded-full animate-pulse"></span><span class="text-xs font-bold text-brand-gold uppercase">Match Found</span></div><h4 class="text-white font-bold text-xl">VIP Buyer #8942</h4></div>
                                    <div class="text-right"><div class="text-2xl font-mono font-bold text-brand-gold" id="dash-card-budget">$500k</div><div class="text-[10px] text-gray-500 uppercase font-bold">Verified Budget</div></div>
                                </div>
                                <div class="grid grid-cols-3 gap-4 mb-6">
                                    <div class="bg-gray-800 p-3 rounded-xl"><div class="text-[10px] text-gray-500 uppercase font-bold">Style</div><div class="text-white font-bold text-sm" id="dash-card-style">Modern</div></div>
                                    <div class="bg-gray-800 p-3 rounded-xl"><div class="text-[10px] text-gray-500 uppercase font-bold">Specs</div><div class="text-white font-bold text-sm" id="dash-card-config">3bd / 2ba</div></div>
                                    <div class="bg-gray-800 p-3 rounded-xl"><div class="text-[10px] text-gray-500 uppercase font-bold">Must Have</div><div class="text-white font-bold text-sm truncate" id="dash-card-amenities">...</div></div>
                                </div>
                                <div id="unlock-area">
                                    <button onclick="unlockLead()" id="btn-unlock" class="w-full py-4 bg-brand-gold text-brand-charcoal font-bold rounded-xl hover:bg-white transition-colors flex items-center justify-center gap-2"><i data-lucide="lock-open" class="w-4 h-4"></i> UNLOCK & PITCH (50 Credits)</button>
                                </div>
                            </div>

                            <!-- PITCH MODAL -->
                            <div id="pitch-modal" class="absolute inset-0 bg-black/80 z-30 hidden flex items-center justify-center p-4 backdrop-blur-sm">
                                <div class="bg-gray-800 border border-gray-600 rounded-2xl p-6 w-full max-w-sm shadow-2xl">
                                    <h4 class="text-white font-bold mb-1 text-lg">Match Inventory to Buyer <span class="text-brand-gold font-mono">#8942</span></h4>
                                    <p class="text-xs text-gray-400 mb-4">Select standing inventory to offer.</p>
                                    
                                    <div class="mb-4 relative">
                                        <textarea id="pitch-message" class="w-full bg-gray-900 border border-gray-600 text-white text-xs rounded-xl p-3 focus:border-brand-gold outline-none h-24 resize-none leading-relaxed" placeholder="Drafting pitch..."></textarea>
                                        <button onclick="generateBuilderPitch()" id="btn-ai-pitch" class="absolute bottom-2 right-2 text-[10px] bg-brand-gold hover:bg-white text-brand-charcoal px-2 py-1 rounded-lg flex items-center gap-1 transition-colors font-bold shadow-sm"><span>✨</span> AI Draft</button>
                                    </div>

                                    <div class="space-y-2 mb-6">
                                        <button onclick="selectPitch(this)" class="pitch-opt w-full text-left p-3 rounded-xl bg-gray-700 border border-gray-600 hover:border-brand-gold hover:bg-gray-600 transition-all text-xs text-gray-300 group">
                                            <div class="flex justify-between mb-1"><span class="font-bold text-white group-hover:text-brand-gold"><i data-lucide="home" class="inline w-3 h-3 mr-2"></i> Move-In Ready (QMI)</span><span class="text-green-400 font-mono">Immediate Close</span></div>
                                        </button>
                                    </div>
                                    <div class="flex gap-3">
                                        <button onclick="document.getElementById('pitch-modal').classList.add('hidden')" class="flex-1 py-3 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-xl text-xs font-bold">Cancel</button>
                                        <button onclick="sendPitch()" class="flex-1 py-3 bg-brand-gold hover:bg-white text-brand-charcoal rounded-xl text-xs font-bold">Send Offer</button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Success Stories (Transaction Receipts) -->
    <section id="testimonials" class="py-24 bg-brand-concrete dark:bg-gray-900 transition-colors scroll-mt-28">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-16 text-center reveal-on-scroll">
                <h2 id="testimonial-title" class="text-3xl font-extrabold text-brand-charcoal dark:text-white">Recent Market Activity</h2>
                <p id="testimonial-desc" class="mt-4 text-gray-500 dark:text-gray-300">Live transaction feed.</p>
            </div>
            <div id="testimonials-grid" class="grid md:grid-cols-3 gap-8 reveal-on-scroll">
                <!-- JS Filled -->
            </div>
        </div>
    </section>

    <!-- Pricing (Buyer - Membership Tiers) -->
    <section id="pricing-buyer" class="py-24 bg-white/50 dark:bg-brand-charcoal border-y border-brand-border dark:border-gray-800 transition-colors scroll-mt-28" data-audience="buyer">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16 reveal-on-scroll">
                <h2 class="text-3xl md:text-4xl font-extrabold text-brand-charcoal dark:text-white">Zero Risk. Infinite Upside.</h2>
                <p class="mt-4 text-gray-500">Stop chasing. Start demanding.</p>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8 mb-16 reveal-on-scroll max-w-4xl mx-auto">
                <!-- Browser Level -->
                <div class="p-8 rounded-3xl bg-brand-concrete/50 dark:bg-gray-800/50 border border-brand-border dark:border-gray-700 opacity-80 hover:opacity-100 transition-all">
                    <h3 class="text-lg font-bold text-gray-500 uppercase tracking-widest mb-4">The Browser</h3>
                    <div class="text-4xl font-extrabold text-gray-400 mb-6">$0</div>
                    <ul class="space-y-4 text-sm text-gray-500 mb-8">
                        <li class="flex gap-2"><i data-lucide="check" class="w-5 h-5"></i> View Heatmap Data</li>
                        <li class="flex gap-2"><i data-lucide="check" class="w-5 h-5"></i> Build "Buy Box"</li>
                        <li class="flex gap-2"><i data-lucide="x" class="w-5 h-5 text-gray-300"></i> Receive Builder Bids</li>
                    </ul>
                    <button class="w-full py-3 border-2 border-gray-300 text-gray-400 font-bold rounded-xl text-sm" disabled>Basic Access</button>
                </div>

                <!-- Verified Gold -->
                <div class="p-8 rounded-3xl bg-white dark:bg-gray-800 border-2 border-brand-gold shadow-glow-gold relative overflow-hidden group">
                    <div class="absolute top-0 right-0 bg-brand-gold text-brand-charcoal text-[10px] font-bold px-3 py-1 rounded-bl-xl uppercase tracking-widest">Recommended</div>
                    <h3 class="text-lg font-bold text-brand-gold uppercase tracking-widest mb-4">Verified Gold</h3>
                    <div class="text-4xl font-extrabold text-brand-charcoal dark:text-white mb-6">$0</div>
                    <ul class="space-y-4 text-sm text-brand-charcoal dark:text-gray-300 mb-8 font-medium">
                        <li class="flex gap-2"><i data-lucide="check" class="w-5 h-5 text-brand-gold"></i> <span class="font-bold">Receive Off-Market Bids</span></li>
                        <li class="flex gap-2"><i data-lucide="check" class="w-5 h-5 text-brand-gold"></i> Hide Identity</li>
                        <li class="flex gap-2"><i data-lucide="check" class="w-5 h-5 text-brand-gold"></i> Access Incentives</li>
                    </ul>
                    <button onclick="openWaitlistModal()" class="w-full py-3 bg-brand-gold text-brand-charcoal font-bold rounded-xl text-sm hover:bg-white transition-all shadow-lg">Verify Funds to Unlock</button>
                </div>
            </div>

            <!-- Value Stack Table -->
            <div class="bg-white dark:bg-gray-800 rounded-3xl p-8 border border-brand-border dark:border-gray-700 reveal-on-scroll">
                <h4 class="font-bold text-brand-charcoal dark:text-white mb-6 text-center">Negotiating Power</h4>
                <div class="grid grid-cols-3 gap-4 text-sm border-b border-gray-200 dark:border-gray-700 pb-2 mb-4 font-bold text-gray-400 uppercase tracking-wider text-[10px]">
                    <div>Feature</div>
                    <div class="text-center">Traditional</div>
                    <div class="text-center text-brand-teal">The Newer Way</div>
                </div>
                <div class="space-y-4">
                    <div class="grid grid-cols-3 gap-4 items-center">
                        <div class="font-medium text-brand-charcoal dark:text-gray-300">Market Access</div>
                        <div class="text-center text-gray-400">Beg for showing</div>
                        <div class="text-center font-bold text-brand-teal">Builders pitch you</div>
                    </div>
                    <div class="grid grid-cols-3 gap-4 items-center">
                        <div class="font-medium text-brand-charcoal dark:text-gray-300">Competition</div>
                        <div class="text-center text-gray-400">Bidding Wars</div>
                        <div class="text-center font-bold text-brand-teal">You are the prize</div>
                    </div>
                    <div class="grid grid-cols-3 gap-4 items-center">
                        <div class="font-medium text-brand-charcoal dark:text-gray-300">Incentives</div>
                        <div class="text-center text-gray-400">If lucky</div>
                        <div class="text-center font-bold text-brand-teal">Rate Buy-Downs</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing (Builder - ROI Calculator) -->
    <section id="pricing-builder" class="py-24 bg-brand-charcoal text-white hidden transition-colors scroll-mt-28" data-audience="builder">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16 reveal-on-scroll"><h2 class="text-3xl md:text-4xl font-extrabold text-white">CAC Engine</h2><p class="text-gray-400 mt-4">Stop burning cash on ads for tire-kickers.</p></div>
            
            <div class="grid lg:grid-cols-2 gap-12 items-center reveal-on-scroll">
                <!-- Calculator Panel -->
                <div class="bg-gray-900 border border-gray-800 rounded-3xl p-8 shadow-2xl relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-brand-gold to-transparent"></div>
                    <h3 class="text-xl font-bold text-white mb-8 flex items-center gap-2"><i data-lucide="calculator" class="w-5 h-5 text-brand-gold"></i> Cost to Acquire Customer</h3>
                    
                    <!-- Old Way -->
                    <div class="mb-6 p-4 rounded-xl bg-red-900/10 border border-red-900/30">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-xs font-bold text-red-400 uppercase">The Old Way</span>
                            <span class="font-mono font-bold text-white">$17,000</span>
                        </div>
                        <div class="text-[10px] text-gray-500 flex justify-between">
                            <span>Realtor Comm (3%)</span>
                            <span>$15,000</span>
                        </div>
                        <div class="text-[10px] text-gray-500 flex justify-between">
                            <span>Zillow/Ads</span>
                            <span>$2,000</span>
                        </div>
                    </div>

                    <!-- Newer Way -->
                    <div class="mb-8 p-4 rounded-xl bg-brand-gold/10 border border-brand-gold/30">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-xs font-bold text-brand-gold uppercase">The Newer Way</span>
                            <span class="font-mono font-bold text-white">$2,650</span>
                        </div>
                        <div class="text-[10px] text-gray-400 flex justify-between">
                            <span>Success Fee (0.5%)</span>
                            <span>$2,500</span>
                        </div>
                        <div class="text-[10px] text-gray-400 flex justify-between">
                            <span>Match Fee</span>
                            <span>$150</span>
                        </div>
                    </div>

                    <div class="border-t border-gray-800 pt-6">
                        <div class="flex justify-between items-end mb-2">
                            <label class="text-xs font-bold text-gray-400 uppercase">Annual Volume</label>
                            <span class="font-mono text-brand-gold font-bold text-lg" id="roi-homes">10 Homes</span>
                        </div>
                        <input type="range" min="1" max="100" value="10" class="w-full mb-6 accent-brand-gold bg-gray-700 h-2 rounded-lg appearance-none cursor-pointer" oninput="updateROI(this.value)">
                        
                        <div class="text-center">
                            <div class="text-sm text-gray-500 mb-1">Projected Annual Savings</div>
                            <div class="text-4xl font-mono font-bold text-green-400" id="roi-savings">$143,500</div>
                        </div>
                    </div>
                </div>

                <!-- Text Side -->
                <div class="space-y-8">
                    <div class="flex gap-4">
                        <div class="w-12 h-12 bg-gray-800 rounded-full flex items-center justify-center text-brand-gold shrink-0 border border-gray-700"><i data-lucide="target" class="w-6 h-6"></i></div>
                        <div>
                            <h4 class="font-bold text-xl text-white">Precision Targeting</h4>
                            <p class="text-gray-400 text-sm mt-2">Don't spray and pray. Filter for buyers with verified funds who specifically requested your lot size and price point.</p>
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <div class="w-12 h-12 bg-gray-800 rounded-full flex items-center justify-center text-brand-gold shrink-0 border border-gray-700"><i data-lucide="zap" class="w-6 h-6"></i></div>
                        <div>
                            <h4 class="font-bold text-xl text-white">Zero Carry Costs</h4>
                            <p class="text-gray-400 text-sm mt-2">Match standing inventory to ready buyers in minutes, not months. Reduce loan interest payments instantly.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA BUYER -->
    <section id="cta-buyer" class="py-20 bg-brand-teal text-white transition-colors scroll-mt-28" data-audience="buyer">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h2 class="text-3xl font-extrabold mb-6">Stop Searching. Start Receiving.</h2>
            <button onclick="openWaitlistModal()" class="bg-white text-brand-teal px-8 py-4 rounded-full font-bold shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all">Create Free Profile</button>
            <!-- FOMO Counter (Buyer Side) -->
            <p id="buyer-fomo-text" class="text-sm text-white/90 mt-6 font-mono font-bold animate-pulse">● 3 Builders in your zip code are ready to bid.</p>
        </div>
    </section>

    <!-- CTA BUILDER -->
    <section id="cta-builder" class="py-20 bg-gray-900 text-white hidden transition-colors scroll-mt-28" data-audience="builder">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h2 class="text-3xl font-extrabold mb-6">Eliminate Spec Risk.</h2>
            <button onclick="openWaitlistModal()" class="bg-brand-gold text-brand-charcoal px-8 py-4 rounded-full font-bold shadow-lg hover:shadow-glow-gold hover:-translate-y-1 transition-all">View Local Demand</button>
            <!-- FOMO Counter -->
            <p id="builder-fomo-text" class="text-sm text-brand-gold mt-6 font-mono font-bold animate-pulse">● 12 Verified Buyers in your zip code are waiting.</p>
        </div>
    </section>

    <!-- NEWER AI ASSISTANT (Replaces FAQ) -->
    <section id="ai-assistant" class="py-24 bg-brand-concrete dark:bg-gray-900 border-t border-brand-border dark:border-gray-800 transition-colors scroll-mt-28">
        <div class="max-w-4xl mx-auto px-4">
            <div class="text-center mb-10">
                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-brand-teal/10 dark:bg-brand-gold/10 text-brand-teal dark:text-brand-gold text-[10px] font-bold uppercase tracking-widest mb-4">
                    <span>✨</span> Newer Intelligence
                </div>
                <h2 class="text-3xl font-extrabold text-brand-charcoal dark:text-white">Have questions? Ask Newer AI.</h2>
                <p class="mt-2 text-gray-500 dark:text-gray-400">Instant answers about the platform, process, and security.</p>
            </div>

            <!-- AI Interface -->
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl border border-brand-border dark:border-gray-700 overflow-hidden relative min-h-[400px] flex flex-col">
                <!-- Chat Window -->
                <div id="ai-chat-window" class="flex-1 p-6 overflow-y-auto space-y-4 max-h-[500px]">
                    <!-- Initial Welcome Message -->
                    <div class="flex gap-4">
                        <div class="w-8 h-8 rounded-full bg-brand-charcoal flex items-center justify-center shrink-0">
                            <svg class="w-4 h-4 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Zm0 14a1 1 0 1 1 1-1 1 1 0 0 1-1 1Zm1-4.33V12a1 1 0 0 1-1 1v0a1 1 0 0 1-1-1v-.5a2.5 2.5 0 0 1 5 0Z"></path></svg>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-700 rounded-2xl rounded-tl-none p-4 text-sm text-brand-charcoal dark:text-gray-200 shadow-sm max-w-[80%]">
                            Hi there! I'm Newer AI. I can explain how our reverse marketplace works, details on pricing, or how we keep your data secure. What's on your mind?
                        </div>
                    </div>
                </div>

                <!-- Input Area -->
                <div class="p-4 bg-gray-50 dark:bg-gray-900 border-t border-brand-border dark:border-gray-700">
                    <!-- Suggestions Chips -->
                    <div id="ai-suggestions" class="flex flex-wrap gap-2 mb-4 overflow-x-auto pb-2 scrollbar-hide">
                        <!-- JS injected suggestions -->
                    </div>
                    
                    <div class="relative">
                        <form onsubmit="handleAiSubmit(event)" class="relative">
                            <input id="ai-input" type="text" placeholder="Ask anything..." class="w-full pl-6 pr-12 py-4 rounded-2xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-brand-teal dark:focus:ring-brand-gold outline-none shadow-sm text-brand-charcoal dark:text-white transition-all">
                            <button type="submit" class="absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-brand-charcoal dark:bg-white rounded-xl text-white dark:text-brand-charcoal hover:opacity-90 transition-opacity">
                                <i data-lucide="arrow-up" class="w-4 h-4"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-brand-charcoal dark:bg-black pt-20 pb-32 md:pb-10 text-gray-400 text-sm transition-colors">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-12 mb-16">
                <div class="col-span-1">
                     <a href="#" class="flex items-baseline gap-2 group mb-4" onclick="window.scrollTo({top: 0, behavior: 'smooth'});">
                        <span class="font-extrabold text-2xl tracking-tight leading-none text-white">Newer<span id="footer-logo-dot" class="text-brand-teal transition-colors">.</span></span>
                    </a>
                    <p class="leading-relaxed mt-4 mb-6">Real Estate. Reversed.<br><span class="text-xs text-gray-500">The Newer Way to buy new construction.</span></p>
                </div>
                <div><h4 class="text-white font-bold mb-6 uppercase tracking-wider text-xs">Platform</h4><ul class="space-y-4"><li><a href="#" class="hover:text-brand-teal dark:hover:text-brand-gold transition-colors">For Buyers</a></li><li><a href="#" class="hover:text-brand-teal dark:hover:text-brand-gold transition-colors">For Builders</a></li></ul></div>
                <div><h4 class="text-white font-bold mb-6 uppercase tracking-wider text-xs">Company</h4><ul class="space-y-4"><li><a href="#" class="hover:text-brand-teal dark:hover:text-brand-gold transition-colors">About</a></li><li><a href="#" class="hover:text-brand-teal dark:hover:text-brand-gold transition-colors">Careers</a></li></ul></div>
                <div><h4 class="text-white font-bold mb-6 uppercase tracking-wider text-xs">Legal</h4><ul class="space-y-4"><li><a href="#" class="hover:text-brand-teal dark:hover:text-brand-gold transition-colors">Privacy</a></li><li><a href="#" class="hover:text-brand-teal dark:hover:text-brand-gold transition-colors">Terms</a></li></ul></div>
            </div>
            <div class="border-t border-gray-800 pt-8 flex justify-between items-center"><p>&copy; 2025 Newer LLC.</p></div>
        </div>
    </footer>

    <!-- NEW: Mobile Sticky CTA + Nav -->
    <div class="md:hidden fixed bottom-0 left-0 w-full z-50 bg-white dark:bg-brand-charcoal border-t border-gray-200 dark:border-gray-700 shadow-2xl p-4 flex flex-col gap-3 pb-8">
        <!-- Main CTA -->
        <button id="mobile-sticky-cta" onclick="openWaitlistModal()" class="w-full py-3.5 rounded-xl font-bold text-sm bg-brand-teal text-white shadow-lg transition-colors">
            Create Free Profile
        </button>
        <!-- Toggle -->
        <div class="flex bg-gray-100 dark:bg-gray-800 rounded-full p-1 relative w-full">
            <button onclick="setAudience('buyer')" class="role-btn-mobile active flex-1 py-2 rounded-full text-xs font-bold transition-all bg-white text-brand-charcoal shadow-sm">Buyers</button>
            <button onclick="setAudience('builder')" class="role-btn-mobile flex-1 py-2 rounded-full text-xs font-bold transition-all text-gray-500 dark:text-gray-400">Builders</button>
        </div>
    </div>

    <!-- Waitlist Modal -->
    <div id="waitlist-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-brand-charcoal/90 dark:bg-black/90 backdrop-blur-sm" onclick="closeWaitlistModal()"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-white dark:bg-gray-800 rounded-3xl p-8 shadow-2xl transition-colors">
            <button onclick="closeWaitlistModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-white"><i data-lucide="x" class="w-6 h-6"></i></button>
            <div class="text-center">
                <div id="waitlist-badge-bg" class="w-20 h-20 bg-brand-concrete rounded-full flex items-center justify-center mx-auto mb-6 transition-colors duration-500">
                    <svg class="w-10 h-10" viewBox="16 16 68 68" fill="none"><path d="M20 80 V35 L50 20 L50 55 L20 80 Z" fill="white" stroke="white" stroke-width="4" stroke-linejoin="round"/><path d="M80 20 V65 L50 80 L50 45 L80 20 Z" fill="white" stroke="white" stroke-width="4" stroke-linejoin="round"/></svg>
                </div>
                <h3 id="waitlist-title" class="text-2xl font-bold text-brand-charcoal dark:text-white mb-2">Get Early Access</h3>
                <p id="waitlist-desc" class="text-gray-500 dark:text-gray-400 text-sm mb-6">Join 4,200+ users.</p>
                <form onsubmit="event.preventDefault(); this.innerHTML='<div class=\'text-center py-10\'><div class=\'text-2xl mb-2\'>🎉</div><div class=\'text-brand-charcoal dark:text-white font-bold text-xl\'>You\'re on the list!</div></div>'">
                    <div class="relative">
                        <input id="email-input" type="email" placeholder="Email Address" required class="w-full bg-brand-concrete dark:bg-gray-700 dark:text-white border-none rounded-xl px-4 py-3 mb-2 focus:ring-2 focus:ring-brand-teal dark:focus:ring-brand-gold outline-none transition-all" oninput="validateEmail(this)">
                        <i id="email-check" data-lucide="check-circle" class="absolute right-3 top-3.5 w-5 h-5 text-green-500 opacity-0 transition-opacity"></i>
                    </div>
                    
                    <input type="text" placeholder="Zip Code" required class="w-full bg-brand-concrete dark:bg-gray-700 dark:text-white border-none rounded-xl px-4 py-3 mb-4 focus:ring-2 focus:ring-brand-teal dark:focus:ring-brand-gold outline-none transition-all">

                    <div class="flex items-center gap-1.5 mb-4 px-1 justify-center md:justify-start"><i data-lucide="lock" class="w-3 h-3 text-gray-400"></i><span id="waitlist-trust-text" class="text-[10px] text-gray-400 font-medium">Secure 256-bit Encryption</span></div>
                    
                    <!-- Hidden Radio logic -->
                    <div class="hidden">
                        <input type="radio" name="role" value="buyer" id="role-buyer-input">
                        <input type="radio" name="role" value="builder" id="role-builder-input">
                    </div>

                    <button id="waitlist-submit-btn" type="submit" class="w-full py-3 bg-brand-charcoal text-white font-bold rounded-xl hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300">Secure My Spot</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Logic Script -->
    <script>
        // State
        let appState = { style: '', budget: 500, bedrooms: 3, amenities: [], credits: 500, persona: '' };
        let currentAudience = 'buyer'; 
        let intelChartInstance = null;
        
        // --- Map Data ---
        const heatMapPoints = Array.from({length: 40}, () => ({ x: Math.random(), y: Math.random(), r: 20 + Math.random() * 40 }));
        
        // --- Scroll Reveal Logic ---
        const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    // Check if it has a counter
                    const counters = entry.target.querySelectorAll('.counter');
                    counters.forEach(c => animateCounter(c));
                    if(entry.target.id === 'testimonials-grid') {
                        // Stagger effect for receipts
                        const receipts = entry.target.querySelectorAll('.receipt-card');
                        receipts.forEach((el, i) => {
                            setTimeout(() => el.querySelector('.stamp-container').classList.add('animate-stamp'), i * 300 + 500);
                        });
                    }
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        document.querySelectorAll('.reveal-on-scroll').forEach(el => observer.observe(el));

        function animateCounter(el) {
            const target = parseInt(el.dataset.target);
            let count = 0;
            const increment = target / 50; 
            const timer = setInterval(() => {
                count += increment;
                if(count >= target) { count = target; clearInterval(timer); }
                el.innerText = Math.floor(count).toLocaleString();
            }, 30);
        }

        const contentConfig = {
            buyer: {
                title: 'Skip the Search.<br><span class="text-brand-teal">Make Builders Bid.</span>',
                desc: 'The first marketplace where you define the terms, and top builders compete to build your home.',
                imageSrc: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=1200&q=80',
                list: `
                    <li class="flex gap-3"><div class="min-w-5 h-5 mt-0.5"><i data-lucide="check" class="w-5 h-5 text-brand-teal"></i></div><div><strong class="text-brand-teal">Save Time:</strong> Build your "Buy Box" once—define style, budget, and must-haves in minutes.</div></li>
                    <li class="flex gap-3"><div class="min-w-5 h-5 mt-0.5"><i data-lucide="check" class="w-5 h-5 text-brand-teal"></i></div><div><strong class="text-brand-teal">Save Money:</strong> Builders compete for you. Access incentives and off-market pricing.</div></li>
                    <li class="flex gap-3"><div class="min-w-5 h-5 mt-0.5"><i data-lucide="check" class="w-5 h-5 text-brand-teal"></i></div><div><strong class="text-brand-teal">Zero Hassle:</strong> Verify budget privately. No more showing bank statements at open houses.</div></li>`,
                legacyLabel: 'The Struggle',
                legacyHeader: `
                    <div class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 dark:text-gray-300"><i data-lucide="search" class="w-5 h-5"></i></div>
                    Active Shopper`,
                legacyList: `
                     <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1"></i> Why does buying feel like a job?</li>
                     <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1"></i> Refreshing apps every 15 mins.</li>
                     <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1"></i> Begging to spend your money.</li>`,
                conceptTitle: 'The Power Shift',
                conceptDesc: 'We flipped the script. <span class="text-brand-teal font-bold" id="concept-highlight">Become the Client.</span>',
                
                // Process Section (Dynamic)
                processKicker: 'The Process',
                processTitle: 'Demand. Verify. Receive.',

                demoTitle: 'Your Personal Market',
                demoDesc: 'Broadcast your needs via the App. Watch the market respond.',
                testimonialTitle: 'Recent Market Activity',
                testimonialDesc: 'Live transaction feed.',
                // 1-2-3 Steps Content
                step1Title: 'Define', step1Desc: 'Set your style, budget, and must-haves.', step1Icon: 'sliders-horizontal',
                step2Title: 'Verify', step2Desc: 'Prove you are real to unlock VIP status.', step2Icon: 'shield-check',
                step3Title: 'Receive', step3Desc: 'Builders compete for your business.', step3Icon: 'gift',
                
                // AI Suggestions
                aiChips: ["Is it expensive?", "How does it work?", "Is it safe?", "Rate buy-downs?"]
            },
            builder: {
                title: 'Eliminate Risk.<br><span class="text-brand-gold">Build Pre-Sold.</span>',
                desc: 'Stop building on speculation. Access a live order book of verified, pre-approved buyers ready to sign today.',
                imageSrc: 'https://images.unsplash.com/photo-1541888946425-d81bb19240f5?auto=format&fit=crop&w=1200&q=80',
                list: `
                    <li class="flex gap-3"><div class="min-w-5 h-5 mt-0.5"><i data-lucide="check" class="w-5 h-5 text-brand-gold"></i></div><div><strong class="text-brand-gold">Zero Marketing Spend:</strong> Direct access to high-intent buyers who have defined their needs.</div></li>
                    <li class="flex gap-3"><div class="min-w-5 h-5 mt-0.5"><i data-lucide="check" class="w-5 h-5 text-brand-gold"></i></div><div><strong class="text-brand-gold">Verified Liquidity:</strong> Plaid-verified leads. Only pitch buyers who can close.</div></li>
                    <li class="flex gap-3"><div class="min-w-5 h-5 mt-0.5"><i data-lucide="check" class="w-5 h-5 text-brand-gold"></i></div><div><strong class="text-brand-gold">Instant Absorption:</strong> Pre-sell lots before you break ground. Reduce carry costs.</div></li>`,
                legacyLabel: 'The Gamble',
                legacyHeader: `
                    <div class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 dark:text-gray-300"><i data-lucide="dice-5" class="w-5 h-5"></i></div>
                    Spec Builder`,
                legacyList: `
                     <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1"></i> Hope is not a business strategy.</li>
                     <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1"></i> Speculation is eating margins.</li>
                     <li class="flex gap-3"><i data-lucide="x" class="w-5 h-5 text-red-400 mt-1"></i> Expensive ads for tire-kickers.</li>`,
                conceptTitle: 'Demand Command Center',
                conceptDesc: 'Newer replaces speculation with data. <span class="text-brand-gold font-bold" id="concept-highlight">Don\'t hunt buyers. Choose them.</span>',
                
                // Process Section (Dynamic)
                processKicker: 'The Workflow',
                processTitle: 'Filter. Identify. Transact.',

                demoTitle: 'Live Order Book',
                demoDesc: 'Filter by lot size, budget, and timeline to find your perfect buyer.',
                testimonialTitle: 'Recent Transactions',
                testimonialDesc: 'Real results.',
                // 1-2-3 Steps Content
                step1Title: 'Filter', step1Desc: 'Set land & budget criteria.', step1Icon: 'filter',
                step2Title: 'Identify', step2Desc: 'Find verified, ready buyers.', step2Icon: 'scan-face',
                step3Title: 'Unlock', step3Desc: 'Directly pitch your build.', step3Icon: 'key',

                // AI Suggestions
                aiChips: ["What is the cost?", "Are leads verified?", "Custom builds?", "Conversion rates?"]
            }
        };

        const modalConfig = {
            buyer: {
                title: 'Unlock Your Personal Market',
                desc: 'Join 4,200+ buyers receiving off-market bids from builders.',
                btnText: 'Create Free Profile',
                micro: 'No credit card required',
                trust: 'Bank-level Encryption (Plaid)',
                color: 'bg-brand-teal',
                hover: 'hover:bg-brand-charcoal'
            },
            builder: {
                title: 'Access High-Intent Demand',
                desc: 'View 1,200+ active buy-boxes in your target zip codes.',
                btnText: 'View Local Demand',
                micro: 'Verification required for approval',
                trust: 'Verified Lead Guarantee',
                color: 'bg-brand-gold',
                hover: 'hover:bg-white hover:text-brand-charcoal'
            }
        };

        const colorMap = {
            buyer: '#00C2B2',   // brand-teal
            builder: '#FBBF24',  // brand-gold
        };

        // Transaction Receipt Data
        const testimonialsData = [
            {
                role: 'buyer',
                time: '2h ago',
                savings: '$14,500',
                builder: 'Lennar (Austin)',
                status: 'OFFER ACCEPTED',
                marketTime: '0 Days'
            },
            {
                role: 'buyer',
                time: '5h ago',
                savings: '$8,200',
                builder: 'PulteGroup',
                status: 'CLOSED',
                marketTime: '0 Days'
            },
            {
                role: 'buyer',
                time: '1d ago',
                savings: '$21,000',
                builder: 'Toll Brothers',
                status: 'CONTRACT SIGNED',
                marketTime: '2 Days'
            },
            {
                role: 'builder',
                time: '45m ago',
                savings: '$15,000 (Mktg)',
                builder: 'David K. (Div Pres)',
                status: 'UNIT PRE-SOLD',
                marketTime: '0 Days'
            },
            {
                role: 'builder',
                time: '3h ago',
                savings: '$2,400 (CAC)',
                builder: 'Custom Builder',
                status: 'LEAD UNLOCKED',
                marketTime: 'Instant'
            },
            {
                role: 'builder',
                time: '1d ago',
                savings: '$12,000 (Carry)',
                builder: 'Regional Dev',
                status: 'LOT CONTRACTED',
                marketTime: '4 Days'
            }
        ];
        
        // Simulating AI Knowledge Base (replaces old FAQ)
        const aiKnowledgeBase = {
            "expensive": { text: "Newer is 100% FREE for buyers. Builders pay us because we save them expensive marketing costs." },
            "cost": { text: "For builders, there is a $0 Platform Fee to list. You pay a small match fee to unlock contact info, and a 0.5% success fee only at closing." },
            "complicated": { text: "No. Setting up your profile takes less than 5 minutes. You define your style, budget, and must-haves, then sit back." },
            "safe": { text: "We use bank-level 256-bit encryption (via Plaid) to verify funds. We never see your login details, and your privacy is guaranteed." },
            "rate": { text: "Yes! In your 'Buy Box,' specify financing needs. Builders often offer 2-1 buydowns or closing cost credits to win your business." },
            "verified": { text: "Yes. Verified Status requires proof of funds or a pre-approval letter within the last 30 days." },
            "custom": { text: "Absolutely. Filter demand by specific lot requirements (e.g., '3-Car Garage', 'Pool Ready') to find buyers looking for exactly what you build." },
            "conversion": { text: "Our conversion rate is ~15x higher than typical leads because intent is verified upfront." },
            "work": { text: "It's simple: 1. Define your needs. 2. Verify your budget. 3. Let builders bid on your business." },
            "start": { text: "Click the 'Create Free Profile' button to get started. It takes about 2 minutes." }
        };

        function setAudience(role) {
            currentAudience = role;
            if(role === 'builder') document.documentElement.classList.add('dark');
            else document.documentElement.classList.remove('dark');

            // 1. Text & Image Updates
            const cfg = contentConfig[role] || contentConfig['buyer'];
            document.getElementById('hero-title').innerHTML = cfg.title;
            document.getElementById('hero-desc').innerText = cfg.desc;
            
            // Update Concept Section with new dynamic fields
            document.getElementById('concept-title').innerText = cfg.conceptTitle;
            document.getElementById('concept-desc').innerHTML = cfg.conceptDesc;
            document.getElementById('concept-label-old').innerText = cfg.legacyLabel;
            document.getElementById('concept-header-old').innerHTML = cfg.legacyHeader;
            document.getElementById('concept-old-list').innerHTML = cfg.legacyList;
            document.getElementById('concept-new-list').innerHTML = cfg.list;
            
            // Update Demo Section Titles
            const demoTitle = document.getElementById('demo-title');
            const demoDesc = document.getElementById('demo-desc');
            if(demoTitle) demoTitle.innerText = cfg.demoTitle;
            if(demoDesc) demoDesc.innerText = cfg.demoDesc;

            // Update Process Section Titles
            document.getElementById('process-kicker').innerText = cfg.processKicker;
            document.getElementById('process-title').innerText = cfg.processTitle;

            document.getElementById('testimonial-title').innerText = cfg.testimonialTitle;
            document.getElementById('testimonial-desc').innerText = cfg.testimonialDesc;

            document.getElementById('step-1-title').innerText = cfg.step1Title;
            document.getElementById('step-1-desc').innerText = cfg.step1Desc;
            document.getElementById('step-2-title').innerText = cfg.step2Title;
            document.getElementById('step-2-desc').innerText = cfg.step2Desc;
            document.getElementById('step-3-title').innerText = cfg.step3Title;
            document.getElementById('step-3-desc').innerText = cfg.step3Desc;

            const heroImg = document.getElementById('hero-image-el');
            if(heroImg && heroImg.src !== cfg.imageSrc) {
                heroImg.style.opacity = '0.5';
                const img = new Image(); img.src = cfg.imageSrc;
                img.onload = () => { heroImg.src = cfg.imageSrc; heroImg.style.opacity = '1'; };
            }

            // 2. Animated Toggle Logic
            const pill = document.getElementById('nav-toggle-pill');
            const btnBuyer = document.getElementById('nav-btn-buyer');
            const btnBuilder = document.getElementById('nav-btn-builder');
            
            if(role === 'buyer') {
                pill.style.transform = 'translateX(0)';
                btnBuyer.classList.remove('text-gray-500'); btnBuyer.classList.add('text-brand-charcoal');
                btnBuilder.classList.add('text-gray-500'); btnBuilder.classList.remove('text-white');
            } else {
                pill.style.transform = 'translateX(100%)';
                btnBuyer.classList.add('text-gray-500'); btnBuyer.classList.remove('text-brand-charcoal');
                btnBuilder.classList.remove('text-gray-500'); btnBuilder.classList.add('text-white');
            }

            // 3. Mobile Floating Nav
            document.querySelectorAll('.role-btn-mobile').forEach(btn => {
                const isBuilderBtn = btn.innerText.includes('Builder');
                const isActive = (role === 'builder' && isBuilderBtn) || (role === 'buyer' && !isBuilderBtn);
                
                btn.classList.remove('active', 'shadow-sm', 'bg-brand-gold', 'bg-brand-teal', 'bg-white', 'text-brand-charcoal', 'text-white', 'text-gray-500', 'text-gray-400');
                
                if (isActive) {
                    btn.classList.add('active', 'shadow-sm');
                    if (role === 'builder') btn.classList.add('bg-brand-gold', 'text-brand-charcoal');
                    else btn.classList.add('bg-white', 'text-brand-charcoal');
                } else {
                    if (role === 'builder') btn.classList.add('text-gray-400');
                    else btn.classList.add('text-gray-500');
                }
            });

            // 4. Section Visibility & Visuals
            const badgeDot = document.getElementById('hero-badge-dot');
            const ctaBtn = document.getElementById('hero-cta-main');
            const conceptBadge = document.getElementById('concept-badge-new');
            const conceptIcon = document.getElementById('concept-icon-new');
            const conceptHighlight = document.getElementById('concept-highlight');
            const stickyCta = document.getElementById('mobile-sticky-cta');

            // Logo Dot Logic
            const navDot = document.getElementById('nav-logo-dot');
            const footerDot = document.getElementById('footer-logo-dot');

            ['bg-brand-teal', 'bg-brand-gold', 'text-brand-teal', 'text-brand-gold'].forEach(c => {
                badgeDot.classList.remove(c); ctaBtn.classList.remove(c); 
                conceptBadge.classList.remove(c); conceptIcon.classList.remove(c); 
                if(conceptHighlight) conceptHighlight.classList.remove(c);
            });

            if(role === 'builder') {
                badgeDot.classList.add('bg-brand-gold');
                ctaBtn.classList.add('bg-brand-gold');
                ctaBtn.classList.add('text-brand-charcoal'); ctaBtn.classList.remove('text-white');
                ctaBtn.innerText = 'View Demand Map';
                
                conceptBadge.classList.add('text-brand-gold');
                conceptIcon.classList.add('bg-brand-gold');
                if(conceptHighlight) conceptHighlight.classList.add('text-brand-gold');

                // Update Dots to Gold
                if(navDot) { navDot.classList.remove('text-brand-teal'); navDot.classList.add('text-brand-gold'); }
                if(footerDot) { footerDot.classList.remove('text-brand-teal'); footerDot.classList.add('text-brand-gold'); }
                
                // Update Step Badges
                ['step-1-badge', 'step-2-badge', 'step-3-badge'].forEach(id => {
                    const el = document.getElementById(id);
                    if(el) { el.classList.remove('bg-brand-teal'); el.classList.add('bg-brand-gold', 'text-brand-charcoal'); }
                });

                document.getElementById('pricing-buyer').classList.add('hidden');
                document.getElementById('pricing-builder').classList.remove('hidden');
                document.getElementById('cta-buyer').classList.add('hidden');
                document.getElementById('cta-builder').classList.remove('hidden');

                if(stickyCta) {
                    stickyCta.innerText = "View Local Demand";
                    stickyCta.classList.remove('bg-brand-teal', 'text-white');
                    stickyCta.classList.add('bg-brand-gold', 'text-brand-charcoal');
                }

            } else {
                badgeDot.classList.add('bg-brand-teal');
                ctaBtn.classList.add('bg-brand-teal');
                ctaBtn.classList.add('text-white'); ctaBtn.classList.remove('text-brand-charcoal');
                ctaBtn.innerText = 'Create Free Profile';

                conceptBadge.classList.add('text-brand-teal');
                conceptIcon.classList.add('bg-brand-teal');
                if(conceptHighlight) conceptHighlight.classList.add('text-brand-teal');

                // Update Dots to Teal
                if(navDot) { navDot.classList.remove('text-brand-gold'); navDot.classList.add('text-brand-teal'); }
                if(footerDot) { footerDot.classList.remove('text-brand-gold'); footerDot.classList.add('text-brand-teal'); }

                // Update Step Badges
                ['step-1-badge', 'step-2-badge', 'step-3-badge'].forEach(id => {
                    const el = document.getElementById(id);
                    if(el) { el.classList.add('bg-brand-teal'); el.classList.remove('bg-brand-gold', 'text-brand-charcoal'); }
                });

                document.getElementById('pricing-buyer').classList.remove('hidden');
                document.getElementById('pricing-builder').classList.add('hidden');
                document.getElementById('cta-buyer').classList.remove('hidden');
                document.getElementById('cta-builder').classList.add('hidden');

                if(stickyCta) {
                    stickyCta.innerText = "Create Free Profile";
                    stickyCta.classList.remove('bg-brand-gold', 'text-brand-charcoal');
                    stickyCta.classList.add('bg-brand-teal', 'text-white');
                }
            }
            
            renderTestimonials(role);
            // Replaced renderFaq with AI Suggestions
            renderAiSuggestions(role);
            
            const activeHex = colorMap[role];
            ['nav-logo-path-1', 'nav-logo-path-2', 'footer-logo-path-1', 'footer-logo-path-2'].forEach(id => {
                const el = document.getElementById(id);
                if(el) { el.setAttribute('fill', activeHex); el.setAttribute('stroke', activeHex); }
            });

            // Update Dynamic Icons for Steps
            document.getElementById('step-1-icon').setAttribute('data-lucide', cfg.step1Icon);
            document.getElementById('step-2-icon').setAttribute('data-lucide', cfg.step2Icon);
            document.getElementById('step-3-icon').setAttribute('data-lucide', cfg.step3Icon);

            lucide.createIcons();
            setTimeout(drawMap, 100);
        }

        function renderTestimonials(role) {
            const tGrid = document.getElementById('testimonials-grid');
            if(!tGrid) return;
            tGrid.innerHTML = '';
            
            const filtered = testimonialsData.filter(t => t.role === role);
            
            filtered.forEach((t, i) => {
                const div = document.createElement('div');
                // Ticket / Receipt Visual
                div.className = "receipt-card bg-white dark:bg-gray-800 p-0 rounded-sm shadow-sm transform transition-all hover:-translate-y-1 relative font-mono text-sm";
                
                const borderColor = role === 'builder' ? 'border-brand-gold' : 'border-brand-teal';
                const textColor = role === 'builder' ? 'text-brand-gold' : 'text-brand-teal';
                const stampColor = role === 'builder' ? '#FBBF24' : '#00C2B2';

                div.innerHTML = `
                    <div class="p-6 border-b border-dashed border-gray-300 dark:border-gray-600 relative overflow-hidden">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-xs text-gray-400 font-bold uppercase tracking-wider">Transaction Record</span>
                            <span class="${textColor} font-bold">${t.time}</span>
                        </div>
                        <div class="text-2xl font-bold text-brand-charcoal dark:text-white mb-1">${t.savings}</div>
                        <div class="text-xs text-gray-500 uppercase tracking-widest mb-6">Value Unlocked</div>
                        
                        <div class="space-y-2 text-xs">
                            <div class="flex justify-between">
                                <span class="text-gray-400">Market Time:</span>
                                <span class="font-bold text-brand-charcoal dark:text-gray-200">${t.marketTime}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Counterparty:</span>
                                <span class="font-bold text-brand-charcoal dark:text-gray-200">${t.builder}</span>
                            </div>
                        </div>

                        <!-- STAMP ANIMATION CONTAINER -->
                        <div class="stamp-container absolute bottom-4 right-4 opacity-0 transform rotate-[-10deg]" style="border-color: ${stampColor}; color: ${stampColor}">
                            ${t.status}
                        </div>
                    </div>
                    <div class="receipt-edge"></div>
                `;
                tGrid.appendChild(div);
            });
        }
        
        // AI Assistant Logic (Replacing FAQ)
        function renderAiSuggestions(role) {
            const container = document.getElementById('ai-suggestions');
            if(!container) return;
            container.innerHTML = '';
            
            const cfg = contentConfig[role] || contentConfig['buyer'];
            const chips = cfg.aiChips || [];
            
            chips.forEach(question => {
                const btn = document.createElement('button');
                btn.className = "flex-shrink-0 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full text-xs font-bold text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-brand-teal dark:hover:border-brand-gold transition-colors";
                btn.innerText = question;
                btn.onclick = () => askAi(question);
                container.appendChild(btn);
            });
        }

        function askAi(question) {
            const input = document.getElementById('ai-input');
            input.value = ''; // clear input
            
            const chatWindow = document.getElementById('ai-chat-window');
            
            // 1. Add User Message
            const userMsg = document.createElement('div');
            userMsg.className = "flex gap-4 flex-row-reverse animate-fade-in";
            userMsg.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center shrink-0">
                    <svg class="w-4 h-4 text-gray-500 dark:text-gray-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                </div>
                <div class="bg-brand-charcoal dark:bg-white rounded-2xl rounded-tr-none p-4 text-sm text-white dark:text-brand-charcoal shadow-sm max-w-[80%]">
                    ${question}
                </div>
            `;
            chatWindow.appendChild(userMsg);
            chatWindow.scrollTop = chatWindow.scrollHeight;

            // 2. Add "Thinking" Indicator
            const thinkingId = 'thinking-' + Date.now();
            const thinkingMsg = document.createElement('div');
            thinkingMsg.id = thinkingId;
            thinkingMsg.className = "flex gap-4 animate-fade-in";
            thinkingMsg.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-brand-teal dark:bg-brand-gold flex items-center justify-center shrink-0">
                    <svg class="w-4 h-4 text-white dark:text-brand-charcoal" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Zm0 14a1 1 0 1 1 1-1 1 1 0 0 1-1 1Zm1-4.33V12a1 1 0 0 1-1 1v0a1 1 0 0 1-1-1v-.5a2.5 2.5 0 0 1 5 0Z"></path></svg>
                </div>
                <div class="bg-gray-100 dark:bg-gray-700 rounded-2xl rounded-tl-none p-4 text-sm text-gray-500 shadow-sm flex items-center gap-1">
                    <div class="dot-typing bg-gray-400"></div>
                    <div class="dot-typing bg-gray-400"></div>
                    <div class="dot-typing bg-gray-400"></div>
                </div>
            `;
            chatWindow.appendChild(thinkingMsg);
            chatWindow.scrollTop = chatWindow.scrollHeight;

            // 3. Process & Respond (Simulated Delay)
            setTimeout(() => {
                document.getElementById(thinkingId).remove();
                
                // Simple keyword matching
                const lowerQ = question.toLowerCase();
                let answer = "I'm still learning about that specific topic. Try asking about pricing, safety, or how the reverse market works!";
                
                for (const key in aiKnowledgeBase) {
                    if (lowerQ.includes(key)) {
                        answer = aiKnowledgeBase[key].text;
                        break;
                    }
                }

                const botMsg = document.createElement('div');
                botMsg.className = "flex gap-4 animate-fade-in";
                botMsg.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-brand-charcoal flex items-center justify-center shrink-0">
                        <svg class="w-4 h-4 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Zm0 14a1 1 0 1 1 1-1 1 1 0 0 1-1 1Zm1-4.33V12a1 1 0 0 1-1 1v0a1 1 0 0 1-1-1v-.5a2.5 2.5 0 0 1 5 0Z"></path></svg>
                    </div>
                    <div class="bg-gray-100 dark:bg-gray-700 rounded-2xl rounded-tl-none p-4 text-sm text-brand-charcoal dark:text-gray-200 shadow-sm max-w-[80%]">
                        ${answer}
                    </div>
                `;
                chatWindow.appendChild(botMsg);
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }, 1200);
        }

        function handleAiSubmit(e) {
            e.preventDefault();
            const input = document.getElementById('ai-input');
            if(input.value.trim()) askAi(input.value.trim());
        }

        // --- Demo & Dashboard Logic (V1.7) ---
        function selectStyle(s) {
            appState.style = s;
            document.querySelectorAll('.style-btn').forEach(b => b.classList.remove('ring-2', 'ring-brand-teal'));
            event.currentTarget.classList.add('ring-2', 'ring-brand-teal');
            setTimeout(() => nextStep('2'), 300);
        }

        function nextStep(id) {
            document.querySelectorAll('.step-content').forEach(d => d.classList.add('hidden'));
            document.getElementById(`step-${id}`).classList.remove('hidden');
        }

        function updateRange(type, val) {
            if(type === 'bed') { appState.bedrooms = val; document.getElementById('bed-val').innerText = val; }
            if(type === 'budget') { appState.budget = val; document.getElementById('budget-val').innerText = `$${val}k`; }
            updateDashPreview();
        }
        
        function setPersona(p) {
            appState.persona = p;
            document.querySelectorAll('.persona-btn').forEach(b => {
                if(b.innerText.includes(p)) b.classList.add('bg-brand-teal', 'text-white');
                else b.classList.remove('bg-brand-teal', 'text-white');
            });
        }

        function toggleAmenity(btn, name) {
            if(appState.amenities.includes(name)) {
                appState.amenities = appState.amenities.filter(a => a !== name);
                btn.classList.remove('ring-1', 'ring-brand-teal', 'bg-brand-teal/5');
            } else {
                if(appState.amenities.length < 3) {
                    appState.amenities.push(name);
                    btn.classList.add('ring-1', 'ring-brand-teal', 'bg-brand-teal/5');
                }
            }
            updateDashPreview();
        }

        function updateDashPreview() {
            const sEl = document.getElementById('dash-card-style');
            if(sEl) sEl.innerText = appState.style || 'Pending';
            const bEl = document.getElementById('dash-card-budget');
            if(bEl) bEl.innerText = `$${appState.budget}k`;
            const cEl = document.getElementById('dash-card-config');
            if(cEl) cEl.innerText = `${appState.bedrooms}bd`;
            const aEl = document.getElementById('dash-card-amenities');
            if(aEl) aEl.innerText = appState.amenities.join(', ') || 'None';
        }

        function verifyUser(e) {
            e.currentTarget.innerHTML = 'Verifying...';
            setTimeout(() => { 
                nextStep('4'); 
                notifyBuilder(); 
                spawnNotification({text: "Verification Complete", icon: "shield"});
            }, 1000);
        }

        const mockBios = [
            "Professional Couple seeking a modern sanctuary. Pre-approved and ready to move quickly for the right home office setup.",
            "Growing family prioritizing school district and space. Looking for a functional layout with room to expand.",
            "Design-conscious buyer seeking architectural uniqueness. Flexible closing timeline for the perfect modern aesthetic."
        ];
        
        function generateBuyerBio() {
            const btn = document.getElementById('btn-generate-bio');
            const container = document.getElementById('ai-bio-container');
            const text = document.getElementById('ai-bio-text');
            
            btn.innerHTML = '<i data-lucide="loader-2" class="w-4 h-4 animate-spin"></i> Generating...'; btn.disabled = true;
            lucide.createIcons();
            
            setTimeout(() => {
                const randomBio = mockBios[Math.floor(Math.random() * mockBios.length)];
                container.classList.remove('hidden');
                text.innerText = `"${randomBio}"`;
                btn.innerHTML = '<span>✨</span> Regenerate Bio'; btn.disabled = false;
            }, 1200);
        }

        function getOrigin(elementId) {
            const el = document.getElementById(elementId);
            if (!el) return { x: 0.5, y: 0.5 }; 
            const rect = el.getBoundingClientRect();
            const x = (rect.left + rect.width / 2) / window.innerWidth;
            const y = (rect.top + rect.height / 2) / window.innerHeight;
            return { x, y };
        }

        function notifyBuilder() {
            const overlay = document.getElementById('user-card-overlay');
            if(overlay) overlay.classList.remove('translate-y-full');
            const origin = getOrigin('builder-dashboard-container');
            // POP 1: Builder receives verified lead
            confetti({ particleCount: 30, spread: 60, origin: origin, colors: ['#00C2B2', '#FBBF24'] });
        }

        function unlockLead() {
            if(appState.credits < 50) return;
            appState.credits -= 50;
            const credStat = document.getElementById('stat-credits');
            if(credStat) credStat.innerText = appState.credits;
            document.getElementById('pitch-modal').classList.remove('hidden');
        }

        function selectPitch(el) {
            el.classList.add('border-brand-gold', 'bg-gray-600');
        }
        
        const mockPitches = [
            "We have a lot in Phase 2 perfectly suited for your custom plan. Let's discuss a build-to-suit option.",
            "I have a spec home finishing in 45 days that hits all your requirements. $10k incentive if under contract this month.",
            "Your budget aligns with our new 'Modern Series'. Verify your funds and let's schedule a hard hat tour."
        ];

        function generateBuilderPitch() {
            const btn = document.getElementById('btn-ai-pitch');
            const area = document.getElementById('pitch-message');
            btn.innerText = 'Thinking...';
            setTimeout(() => {
                area.value = mockPitches[Math.floor(Math.random() * mockPitches.length)];
                btn.innerHTML = '<span>✨</span> AI Draft';
            }, 800);
        }

        function sendPitch() {
             document.getElementById('pitch-modal').classList.add('hidden');
             document.getElementById('user-card-overlay').classList.add('translate-y-full');
             
             const container = document.getElementById('buyer-pitches-container');
             container.innerHTML = `
                 <div class="animate-fade-in p-4 bg-brand-teal/5 border border-brand-teal rounded-xl cursor-pointer hover:shadow-md transition-all" onclick="acceptPitch()">
                    <div class="flex justify-between items-start mb-2">
                        <div class="text-[10px] font-bold uppercase text-brand-teal">New Proposal</div>
                        <div class="w-6 h-6 rounded-full bg-brand-teal text-white flex items-center justify-center"><i data-lucide="home" class="w-3 h-3"></i></div>
                    </div>
                    <h4 class="font-bold text-sm text-brand-charcoal mb-1">Move-In Ready Match</h4>
                    <p class="text-xs text-gray-500 mb-3">"We have a spec home finishing in 45 days that hits all your requirements..."</p>
                    <button class="w-full py-2 bg-brand-teal text-white text-xs font-bold rounded-lg">View Details</button>
                 </div>
             `;
             lucide.createIcons();
             spawnNotification({text: "Pitch Sent!", icon: "send"});
        }

        function acceptPitch() {
             const container = document.getElementById('buyer-screen-container');
             container.innerHTML = `
                <div class="h-full flex flex-col items-center justify-center text-center p-6 animate-fade-in">
                    <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-4 shadow-sm border border-green-200">
                        <i data-lucide="check" class="w-10 h-10"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-brand-charcoal mb-2">It's a Match!</h3>
                    <p class="text-sm text-gray-500 mb-6">Builder notified. Preparing contract.</p>
                    <button onclick="resetDemo()" class="text-xs text-brand-teal underline">Start Over</button>
                </div>
             `;
             lucide.createIcons();
             
             const phoneOrigin = getOrigin('phone-container');
             // POP 2: Buyer accepts pitch
             confetti({ particleCount: 100, spread: 70, origin: phoneOrigin, colors: ['#00C2B2', '#10B981'] });
             
             triggerBuilderSale();
        }

        function triggerBuilderSale() {
            const body = document.getElementById('builder-dashboard-body');
            
            const wrapper = document.createElement('div');
            wrapper.id = 'builder-sale-overlay-wrapper';
            wrapper.className = 'absolute inset-0 z-50 flex items-center justify-center pointer-events-none';
            
            const saleAlert = document.createElement('div');
            saleAlert.className = 'w-4/5 bg-gray-900/95 border-2 border-brand-gold rounded-xl shadow-2xl p-6 text-center animate-fade-in backdrop-blur-xl pointer-events-auto';
            saleAlert.innerHTML = `
                <div class="mb-4 stamp-container animate-stamp">SOLD</div>
                <h3 class="text-xl font-bold text-white mb-1 uppercase tracking-wider">Sale Pending</h3>
                <p class="text-xs text-gray-400 mb-4">Buyer #8942 Accepted</p>
                <div class="text-[10px] text-gray-500 italic">Marketing Spend: $0.00</div>
            `;
            
            wrapper.appendChild(saleAlert);
            body.appendChild(wrapper);
            // No confetti here
        }

        function resetDemo() {
            const list = document.getElementById('dashboard-list-view');
            if(list) list.innerHTML = '';
            
            const saleWrapper = document.getElementById('builder-sale-overlay-wrapper');
            if (saleWrapper) saleWrapper.remove();
            
            location.reload(); 
        }

        // ROI Calculator Logic
        function updateROI(homes) {
            const savingsPerHome = 14350; // $17k - $2650
            const total = homes * savingsPerHome;
            document.getElementById('roi-homes').innerText = `${homes} Homes`;
            document.getElementById('roi-savings').innerText = `$${total.toLocaleString()}`;
        }

        // --- Feed & Map ---
        function addFeedItem() {
            const container = document.getElementById('dashboard-list-view');
            if (!container) return;
            const item = document.createElement('div');
            item.className = "flex items-center justify-between p-3 bg-gray-800 rounded-xl border border-gray-700 animate-pulse";
            item.innerHTML = `<div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-xs font-mono text-gray-400">#${Math.floor(Math.random()*9000)+1000}</div><div><div class="text-xs font-bold text-white">Active Search</div><div class="text-[10px] text-gray-500">Just Now</div></div></div><div class="text-xs font-mono font-bold text-brand-gold">$${Math.floor(Math.random()*400)+400}k</div>`;
            container.prepend(item);
            if(container.children.length > 8) container.lastElementChild.remove();
        }

        function toggleDashboardView(v) {
            const list = document.getElementById('dashboard-list-view');
            const map = document.getElementById('dashboard-map-view');
            const intel = document.getElementById('dashboard-intel-view');
            const listBtn = document.getElementById('view-list-btn');
            const mapBtn = document.getElementById('view-map-btn');
            const intelBtn = document.getElementById('view-intel-btn');

            if(list) list.classList.add('hidden'); 
            if(map) map.classList.add('hidden'); 
            if(intel) intel.classList.add('hidden');
            
            [listBtn, mapBtn, intelBtn].forEach(b => { 
                if(b) {
                    b.classList.remove('bg-brand-gold', 'text-brand-charcoal'); 
                    b.classList.add('text-gray-400'); 
                }
            });

            if(v === 'map') { 
                map.classList.remove('hidden'); mapBtn.classList.add('bg-brand-gold', 'text-brand-charcoal'); drawMap(); 
            } else if (v === 'intel') {
                intel.classList.remove('hidden'); intelBtn.classList.add('bg-brand-gold', 'text-brand-charcoal'); initChart();
            } else { 
                list.classList.remove('hidden'); listBtn.classList.add('bg-brand-gold', 'text-brand-charcoal'); 
            }
        }

        function drawMap() {
            const c = document.getElementById('demandMap');
            if(!c) return;
            c.width = c.parentElement.offsetWidth;
            c.height = c.parentElement.offsetHeight;
            const ctx = c.getContext('2d');
            
            ctx.fillStyle = '#111827';
            ctx.fillRect(0,0,c.width,c.height);
            
            heatMapPoints.forEach(p => {
                const x = p.x * c.width;
                const y = p.y * c.height;
                const grad = ctx.createRadialGradient(x, y, 0, x, y, p.r);
                grad.addColorStop(0, 'rgba(251, 191, 36, 0.2)'); 
                grad.addColorStop(1, 'rgba(251, 191, 36, 0)');
                ctx.fillStyle = grad;
                ctx.beginPath();
                ctx.arc(x, y, p.r, 0, Math.PI*2);
                ctx.fill();
            });
        }

        function initChart() {
            if(intelChartInstance) return;
            const c = document.getElementById('intelChart');
            if(!c) return;
            const ctx = c.getContext('2d');
            intelChartInstance = new Chart(ctx, {
                type: 'line',
                data: { labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'], datasets: [{ label: 'Avg Buyer Budget', data: [420, 435, 430, 450, 465, 485], borderColor: '#FBBF24', tension: 0.4, borderWidth: 2, pointRadius: 0 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { display: false }, x: { ticks: { color: '#6b7280' }, grid: { display: false } } } }
            });
        }
        
        function toggleFaq(btn) {
            const ans = btn.nextElementSibling;
            const icon = btn.querySelector('svg') || btn.querySelector('i');
            if (!icon) return; 
            
            if(ans.classList.contains('open')) { 
                ans.classList.remove('open'); 
                icon.style.transform = 'rotate(0deg)'; 
            } else { 
                ans.classList.add('open'); 
                icon.style.transform = 'rotate(180deg)'; 
            }
        }

        const notifications = [
            { text: "New Match: $450k Budget", icon: "check" },
            { text: "Builder Bid: $15k Incentive", icon: "tag" },
            { text: "Pre-Approval Verified", icon: "shield" }
        ];
        
        function spawnNotification(custom) {
            const container = document.getElementById('hero-floating-notifications');
            if(!container) return;
            const notif = custom || notifications[Math.floor(Math.random() * notifications.length)];
            const el = document.createElement('div');
            el.className = "floating-bubble bg-white/90 dark:bg-gray-900/90 backdrop-blur px-4 py-2 rounded-xl shadow-lg border border-white/20 text-xs font-bold flex items-center gap-2 text-brand-charcoal dark:text-white";
            el.innerHTML = `<i data-lucide="${notif.icon}" class="w-3 h-3 text-brand-teal"></i> ${notif.text}`;
            container.appendChild(el);
            lucide.createIcons();
            setTimeout(() => { el.remove(); }, 4000);
        }
        
        function validateEmail(input) {
            const icon = document.getElementById('email-check');
            if(input.value.includes('@') && input.value.includes('.')) {
                icon.classList.remove('opacity-0');
            } else {
                icon.classList.add('opacity-0');
            }
        }

        function openWaitlistModal(role) { 
            const target = role || currentAudience;
            updateModalContext(target);
            document.getElementById('waitlist-modal').classList.remove('hidden'); 
        }
        
        function updateModalContext(role) {
            const conf = modalConfig[role];
            document.getElementById('waitlist-title').innerText = conf.title;
            document.getElementById('waitlist-desc').innerText = conf.desc;
            const btn = document.getElementById('waitlist-submit-btn');
            btn.innerText = conf.btnText;
            btn.className = `w-full py-3 font-bold rounded-xl hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300 ${conf.color} ${conf.hover}`;
            if(role === 'builder') { btn.classList.remove('text-white'); btn.classList.add('text-brand-charcoal'); }
            else { btn.classList.add('text-white'); btn.classList.remove('text-brand-charcoal'); }
            
            const badge = document.getElementById('waitlist-badge-bg');
            badge.classList.remove('bg-brand-teal', 'bg-brand-gold');
            badge.classList.add(role === 'builder' ? 'bg-brand-gold' : 'bg-brand-teal');
            
            document.getElementById('waitlist-trust-text').innerText = conf.trust;
            
            const buyerInput = document.getElementById('role-buyer-input');
            const builderInput = document.getElementById('role-builder-input');
            if(role === 'buyer') buyerInput.checked = true;
            else builderInput.checked = true;
        }

        function closeWaitlistModal() { document.getElementById('waitlist-modal').classList.add('hidden'); }

        document.addEventListener('DOMContentLoaded', () => { 
            lucide.createIcons(); 
            setAudience('buyer'); 
            setInterval(addFeedItem, 3000); 
            setInterval(spawnNotification, 2500); 
            addFeedItem(); 
        });

    </script>
</body>
</html>
